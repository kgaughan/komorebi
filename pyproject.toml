#:schema https://json.schemastore.org/pyproject.json

[build-system]
requires = ["hatchling"]
build-backend = "hatchling.build"

[project]
name = "komorebi"
dynamic = ["version"]
description = "A tumblelog engine"
license = "MIT"
authors = [{ name = "Keith Gaughan", email = "keith@gaughan.ie" }]
requires-python = ">=3.9"
readme = "README.rst"
# The versions are pegged with FreeBSD
dependencies = [
	"flask==3.0.3",
	"flask-httpauth==4.8.0",
	"flask-wtf~=1.1.2",
	"wtforms==3.1.2",
	"markdown==3.5.2",
	"passlib==1.7.4",
	"itsdangerous==2.1.2",
]

[project.urls]
Source = "https://github.com/kgaughan/komorebi"

[tool.rye]
dev-dependencies = [
    "pytest>=8.2.2",
    "mypy>=1.10.1",
    "types-markdown>=3.6.0.20240316",
    "types-passlib>=1.7.7.20240327",
]
universal = true
generate-hashes = true
managed = true

[tool.rye.scripts.devserver]
cmd = "flask --app komorebi --debug run"
env = { KOMOREBI_SETTINGS = "../dev/dev.cfg" }

[tool.rye.scripts.sri]
cmd = "flask --app komorebi sri"
env = { KOMOREBI_SETTINGS = "../dev/dev.cfg" }

[tool.hatch.version]
path = "komorebi/__init__.py"

[tool.hatch.build]
exclude = [".coveragerc", "Makefile", ".github/", ".*_cache/", "tests/"]

[tool.mypy]
ignore_missing_imports = true
